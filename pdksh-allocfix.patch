diff -urN pdksh-5.2.14.orig/shf.c pdksh-5.2.14/shf.c
--- pdksh-5.2.14.orig/shf.c	Sat Jul 31 14:29:36 1999
+++ pdksh-5.2.14/shf.c	Sat Jul 31 14:30:48 1999
@@ -355,7 +355,6 @@
 		shf->rp = nbuf + (shf->rp - shf->buf);
 		shf->wp = nbuf + (shf->wp - shf->buf);
 		shf->rbsize += shf->wbsize;
-		shf->wbsize += shf->wbsize;
 		shf->wnleft += shf->wbsize;
 		shf->wbsize *= 2;
 		shf->buf = nbuf;
